class Song_Scene extends Phaser.State{init(){const t=this.game;t.bgm.stop(),t.bgv.addToWorld(-400,0,0,0,1,1)}create(){const t=this.game,e=(Phaser.Keyboard,button_config.song_scene);this.enter_button=new Button({game:t,callback:this.enter_scene,callbackContext:this,form:{fill:"#008cff"}},e.enter_button),this.exit_button=new Button({game:t,callback:this.exit_scene,callbackContext:this,form:{fill:"#008cff"}},e.exit_button),this.song_buttons=new Buttons({game:t,pre_callback:this.choose_pre_song,nxt_callback:this.choose_nxt_song,callbackContext:this},e.song_buttons),this.song_buttons.addMultiple([new Button({game:t,callback:this.choose_pre_song,callbackContext:this,form:{fill:this.song_buttons.normal_style.fill}},e.left_song_button),new Button({game:t,callback:this.choose_nxt_song,callbackContext:this,form:{fill:this.song_buttons.normal_style.fill}},e.right_song_button)]),-1===this.game.active_song&&(this.game.active_song=0),this.song_infos=new Songs({game:t});for(let t=0;t<song_size;++t)this.song_infos.add(new Song_Info({game:this.game},song_config[t].info));if(!this.game.song_audios){this.game.song_audios=[];for(let e=0;e<song_size;e++)this.game.song_audios[e]=t.add.audio(song_config[e].AudioFilename,1,!0)}this.song_infos.getAt(this.game.active_song).visible=!0,this.song_infos.getAt(this.game.active_song).title.visible=!0,this.song_infos.getAt(this.game.active_song).artist.visible=!0,this.song_infos.getAt(this.game.active_song).album.visible=!0,this.game.song_audios[this.game.active_song].isPlaying||this.game.song_audios[this.game.active_song].play()}enter_scene(){this.game.state.start("Level_Scene")}exit_scene(){const t=this.game;this.song_infos;this.game.song_audios[this.game.active_song].stop(),t.bgm.play(),t.state.start("Main_Scene")}choose_pre_song(){const t=this.song_buttons,e=this.song_infos,s=this.game.song_audios,i=e.length;t.getAt(t.active).text.setStyle(t.normal_style),t.active=0,t.getAt(0).text.setStyle(t.active_style),e.getAt(e.active).visible=!1,e.getAt(e.active).title.visible=!1,e.getAt(e.active).artist.visible=!1,e.getAt(e.active).album.visible=!1,s[e.active].stop(),e.active=(e.active-1+i)%i,s[e.active].play(),e.getAt(e.active).visible=!0,e.getAt(e.active).title.visible=!0,e.getAt(e.active).artist.visible=!0,e.getAt(e.active).album.visible=!0,this.game.active_song=e.active}choose_nxt_song(){const t=this.song_buttons,e=this.song_infos,s=this.game.song_audios;t.getAt(t.active).text.setStyle(t.normal_style),t.active=1,t.getAt(1).text.setStyle(t.active_style),e.getAt(e.active).visible=!1,e.getAt(e.active).title.visible=!1,e.getAt(e.active).artist.visible=!1,e.getAt(e.active).album.visible=!1,s[e.active].stop(),e.active=(e.active+1)%e.length,e.getAt(e.active).visible=!0,e.getAt(e.active).title.visible=!0,e.getAt(e.active).artist.visible=!0,e.getAt(e.active).album.visible=!0,s[e.active].play(),this.game.active_song=e.active}}