class Level_Scene extends Phaser.State{init(){this.game.bgv.addToWorld(-400,0,0,0,1,1)}create(){const e=this.game,t=button_config.level_scene;this.enter_button=new Button({game:e,callback:this.enter_scene,callbackContext:this,form:{fill:"#008cff"}},t.enter_button),this.exit_button=new Button({game:e,callback:this.exit_scene,callbackContext:this,form:{fill:"#008cff"}},t.exit_button);const s=this.level_buttons=new Buttons({game:e,pre_callback:this.choose_pre_level,nxt_callback:this.choose_nxt_level,callbackContext:this},t.level_buttons),i=s.normal_style;s.addMultiple([new Button({game:e,callback:this.choose_easy_level,callbackContext:this,form:s.active_style},t.easy_level_button),new Button({game:e,callback:this.choose_normal_level,callbackContext:this,form:i},t.normal_level_button),new Button({game:e,callback:this.choose_hard_level,callbackContext:this,form:i},t.hard_level_button)]),new Leader_Score({game:this.game,x:40,y:100,text:"天梯",style:{fill:"#008cff",fontSize:24}}),this.easy_infos=[],this.easy_leaderboard=[],leader_board.get_scores(song_config[this.game.active_song].info.Title,"easy").then(e=>{e.forEach(e=>{this.easy_infos.push(e)}),this.easy_infos.sort((e,t)=>t.val()-e.val());for(let e=0;e<this.easy_infos.length;e++)this.easy_leaderboard[e]=new Leader_Score({game:this.game,x:40,y:120+40*e,text:this.easy_infos[e].key+": "+this.easy_infos[e].val(),style:{fill:"#008cff",fontSize:24}}),this.easy_leaderboard[e].visible=!0}),this.normal_infos=[],this.normal_leaderboard=[],leader_board.get_scores(song_config[this.game.active_song].info.Title,"normal").then(e=>{e.forEach(e=>{this.normal_infos.push(e)}),this.normal_infos.sort((e,t)=>t.val()-e.val());for(let e=0;e<this.normal_infos.length;e++)this.normal_leaderboard[e]=new Leader_Score({game:this.game,x:40,y:120+40*e,text:this.normal_infos[e].key+": "+this.normal_infos[e].val(),style:{fill:"#008cff",fontSize:24}})}),this.hard_infos=[],this.hard_leaderboard=[],leader_board.get_scores(song_config[this.game.active_song].info.Title,"hard").then(e=>{e.forEach(e=>{this.hard_infos.push(e)}),this.hard_infos.sort((e,t)=>t.val()-e.val());for(let e=0;e<this.hard_infos.length;e++)this.hard_leaderboard[e]=new Leader_Score({game:this.game,x:40,y:120+40*e,text:this.hard_infos[e].key+": "+this.hard_infos[e].val(),style:{fill:"#008cff",fontSize:24}})}),this.infos=[this.easy_leaderboard,this.normal_leaderboard,this.hard_leaderboard]}enter_scene(){const e=this.game,t=e.song_audios[e.active_song];this.camera.fade(0,1e3,!1),t.fadeOut(1e3),t.onFadeComplete.add(()=>{e.state.start("Game_Start")},this)}exit_scene(){this.game.state.start("Song_Scene")}choose_pre_level(){const e=this.level_buttons,t=e.length;for(let t=0;t<this.infos[e.active].length;t++)this.infos[e.active][t].visible=!1;e.getAt(e.active).text.setStyle(e.normal_style),e.active=(e.active-1+t)%t,e.getAt(e.active).text.setStyle(e.active_style);for(let t=0;t<this.infos[e.active].length;t++)this.infos[e.active][t].visible=!0;this.game.active_level=e.active}choose_nxt_level(){const e=this.level_buttons;for(let t=0;t<this.infos[e.active].length;t++)this.infos[e.active][t].visible=!1;e.getAt(e.active).text.setStyle(e.normal_style),e.active=(e.active+1)%e.length,e.getAt(e.active).text.setStyle(e.active_style);for(let t=0;t<this.infos[e.active].length;t++)this.infos[e.active][t].visible=!0;this.game.active_level=e.active}choose_easy_level(){const e=this.level_buttons;for(let t=0;t<this.infos[e.active].length;t++)this.infos[e.active][t].visible=!1;e.getAt(e.active).text.setStyle(e.normal_style),e.active=0,e.getAt(e.active).text.setStyle(e.active_style);for(let t=0;t<this.infos[e.active].length;t++)this.infos[e.active][t].visible=!0;this.game.active_level=e.active}choose_normal_level(){const e=this.level_buttons;for(let t=0;t<this.infos[e.active].length;t++)this.infos[e.active][t].visible=!1;e.getAt(e.active).text.setStyle(e.normal_style),e.active=1,e.getAt(e.active).text.setStyle(e.active_style);for(let t=0;t<this.infos[e.active].length;t++)this.infos[e.active][t].visible=!0;this.game.active_level=e.active}choose_hard_level(){const e=this.level_buttons;for(let t=0;t<this.infos[e.active].length;t++)this.infos[e.active][t].visible=!1;e.getAt(e.active).text.setStyle(e.normal_style),e.active=2,e.getAt(e.active).text.setStyle(e.active_style);for(let t=0;t<this.infos[e.active].length;t++)this.infos[e.active][t].visible=!0;this.game.active_level=e.active}}