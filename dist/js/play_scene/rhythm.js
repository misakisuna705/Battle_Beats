class Notes extends Phaser.Group{constructor({game:t,parent:e,name:s,addToStage:i,enableBody:a,physicsBodyType:h,index:r}){super(t,e,s,i,a,h,r);for(let t=0;t<25;++t)this.add(new Note({game:this.game,x:button_config.play_scene.target_buttons[r].x,y:0,key:"note"}));this.setAll("exists",!1),this.setAll("checkWorldBounds",!0),this.setAll("outOfBoundsKill",!0),this.setAll("anchor.x",.5),this.setAll("anchor.y",1)}}class Note extends Phaser.Sprite{constructor({game:t,x:e,y:s,key:i,frame:a}){super(t,e,s,i,a),this.index=-1,this.perfect_time=0,this.point=0,this.tail=null}hit(){this.kill(),this.game.state.getCurrentState().score.point_upgrade(this.point),this.tail&&this.tail.hit(this.index)}}class Tails extends Phaser.Group{constructor({game:t,parent:e,name:s,addToStage:i,enableBody:a,physicsBodyType:h,index:r}){super(t,e,s,i,a,h,r);for(let t=0;t<25;++t)this.add(new Tail({game:this.game,x:button_config.play_scene.target_buttons[r].x,y:0,key:"tail"}));this.setAll("exists",!1),this.setAll("checkWorldBounds",!0),this.setAll("outOfBoundsKill",!0),this.setAll("anchor.x",.5),this.setAll("anchor.y",1)}}class Tail extends Phaser.Sprite{constructor({game:t,x:e,y:s,key:i,frame:a}){super(t,e,s,i,a),this.ispressed=!1,this.timer=null,this.bonus=2,this.bonus_time=0,this.decrement=this.game.state.getCurrentState().song_speed/1e3*20/this.height}hit(t){this.ispressed=!0,this.timer=this.game.time.create(),this.timer.repeat(20,this.bonus_time/20,()=>{this.ispressed&&(this.game.state.getCurrentState().target_buttons[t].presskey.isDown?(this.body.velocity.y=0,this.scale.y<0?this.scale.y=0:this.scale.y-=this.decrement,this.game.state.getCurrentState().score.bonus_upgrade(this.bonus)):(this.ispressed=!1,this.body.velocity.y=this.game.state.getCurrentState().song_speed))},this),this.timer.onComplete.add(()=>{this.game.state.getCurrentState().target_buttons[t].presskey.isDown&&(this.scale.y=0)}),this.timer.start()}}