let debug=!1;class HERO extends Phaser.Sprite{constructor(i,t,s,h,a,e,l,n,o=!1,d){super(a,s,h,l.frame,d),this.info=new Article({game:this.game,x:120,y:360},{text:l.info,style:{fill:"#008cff"}});try{if(this.callbackContext=e,this.debug=o,this.anchor.set(.5,.5),this.scale.set(i/this.width,t/this.height),null!=l.idle&&null!=l.idle?(this.animations.add("idle",l.idle[0],l.idle[1],!0),this.haveIdle=!0):this.haveIdle=!1,null!=l.ar&&null!=l.ar?(this.animations.add("ar",l.ar[0],l.ar[1],!1).onComplete.add(this.idle,this,0),this.haveAr=!0):this.haveAr=!1,null!=l.atk&&null!=l.atk){this.atkSize=l.atk.length;let i=0;l.atk.forEach(t=>{this.haveAr?this.animations.add("atk"+i,t[0],t[1],!1).onComplete.add(this.ar,this,0):this.haveIdle?this.animations.add("atk"+i,t[0],t[1],!1).onComplete.add(this.idle,this,0):this.animations.add("atk"+i,t[0],t[1],!1),i++}),null!=n&&(this.atkKey=this.game.input.keyboard.addKey(n),this.atkKey.onDown.add(this.attack,this,0)),this.haveAtk=!0}else this.haveAtk=!1;null!=l.skill&&null!=l.skill?(this.skillSize=l.skill[0].length,this.skillFirstFrame=l.skill[0][0],show_debug(l.frame+" skill's first frame "+this.skillFirstFrame,this.debug),this.atkKey.onHoldContext=this,this.atkKey.onHoldCallback=this.skill,this.haveAr?this.animations.add("skill",l.skill[0],l.skill[1],!1).onComplete.add(this.ar,this,0):this.haveIdle?this.animations.add("skill",l.skill[0],l.skill[1],!1).onComplete.add(this.idle,this,0):this.animations.add("skill",l.skill[0],l.skill[1],!1),this.haveSkill=!0,this.holdPrevTime=0,this.skillSpeed=l.skillSpeed,this.holdCount=0):this.haveSkill=!1,this.idx=-1}catch(i){console.log(i)}}}function show_debug(i,t){t&&console.log(i)}HERO.prototype.start=function(){try{this.game.add.existing(this),show_debug("Senia start",this.debug),this.haveIdle&&this.animations.play("idle")}catch(i){console.log(i)}},HERO.prototype.attack=function(){try{if(!this.visible)return;if(this.holdPrevTime=this.game.time.now,this.haveAr&&this.haveIdle){let i=this.animations.getAnimation("idle").isPlaying,t=this.animations.getAnimation("ar").isPlaying;(i||t)&&(this.idx=(this.idx+1)%this.atkSize,show_debug("hero attack! "+this.idx,this.debug),this.animations.play("atk"+this.idx))}else if(this.haveAr){this.animations.getAnimation("ar").isPlaying&&(this.idx=(this.idx+1)%this.atkSize,show_debug("hero attack! "+this.idx,this.debug),this.animations.play("atk"+this.idx))}else if(this.haveIdle){this.animations.getAnimation("idle").isPlaying&&(this.idx=(this.idx+1)%this.atkSize,show_debug("hero attack! "+this.idx,this.debug),this.animations.play("atk"+this.idx))}else v.idx=(this.idx+1)%this.atkSize,show_debug("hero attack! "+this.idx,this.debug),this.animations.play("atk"+this.idx)}catch(i){console.log(i)}},HERO.prototype.idle=function(){this.visible&&(show_debug("hero idle!",this.debug),this.animations.play("idle"))},HERO.prototype.ar=function(){this.visible&&(show_debug("hero ar!",this.debug),this.animations.play("ar"))},HERO.prototype.skill=function(){if(this.haveSkill){let i=this.animations.getAnimation("skill");this.game.time.now-this.holdPrevTime>500&&(this.holdCount>=12?(this.holdCount=0,i.isPlaying||i.play()):this.holdCount=this.holdCount+this.skillSpeed)}};